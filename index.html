<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Async JS Examples</title>
</head>

<body>
    <script>
        // ---------- Example 1: Login and Get Videos using Promises ----------

        const loginUser = (email, password) => {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    if (email === "abbas@abc.com" && password === 1234) {
                        resolve(email);
                    } else {
                        reject("Invalid email or password");
                    }
                }, 2000);
            });
        };

        const getUserVideos = (email) => {
            return new Promise((resolve, reject) => {
                setTimeout(() => {
                    if (email) {
                        resolve(["video1", "video2", "video3"]);
                    } else {
                        reject("Email is required to fetch videos");
                    }
                }, 3000);
            });
        };

        const showUserVideos = async () => {
            try {
                const email = await loginUser("abbas@abc.com", 1234);
                console.log("Logged in as:", email);

                const videos = await getUserVideos(email);
                console.log("Fetched videos:", videos);
            } catch (err) {
                console.error("Error:", err);
            }
        };

        showUserVideos();

        // ---------- Example 2: Check Result using Promises ----------

        const checkResult = (marks) => {
            return new Promise((resolve, reject) => {
                if (marks > 80) {
                    resolve("You passed with excellent marks!");
                } else {
                    reject("You failed. Better luck next time.");
                }
            });
        };

        const displayResult = async () => {
            try {
                const result = await checkResult(50);
                console.log("Result:", result);
            } catch (error) {
                console.error("Result Error:", error);
            }
        };

        displayResult();

        console.log("This message prints first due to async nature.");
    </script>
</body>

</html>
